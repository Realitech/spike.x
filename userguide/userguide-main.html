<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.0">
<meta name="keywords" content="documentation, spikex, vertx, vert.x">
<meta name="author" content="Christoffer Lindevall">
<title>Spike.x User Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic|Noto+Serif:400,400italic,700,700italic|Droid+Sans+Mono:400">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic|Noto+Serif:400,400italic,700,700italic|Droid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-check-square-o:first-child,ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after,a[href^="mailto:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{font-weight: normal}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#00}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="book toc2 toc-right">
<div id="header">
<h1>Spike.x User Guide</h1>
<div class="details">
<span id="author" class="author">Christoffer Lindevall</span><br>
<span id="revnumber">version 1.0,</span>
<span id="revdate">2016</span>
<br><span id="revremark">Dawn of the Four-toed hedgehog</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Spike.x</div>
<ul class="sectlevel1">
<li><a href="#sense-react-visualize">Sense. React. Visualize.</a></li>
<li><a href="#introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#supported-platforms">1.1. Supported platforms</a></li>
<li><a href="#quick-start">1.2. Quick start</a></li>
<li><a href="#directories-and-files">1.3. Directories and files</a></li>
<li><a href="#wiki-and-issues">1.4. Wiki and issues</a></li>
<li><a href="#license">1.5. License</a></li>
</ul>
</li>
<li><a href="#installation">2. Installation</a>
<ul class="sectlevel2">
<li><a href="#deployment-models">2.1. Deployment models</a></li>
<li><a href="#spike-x-on-linux-os-x-and-freebsd">2.2. Spike.x on Linux, OS X and FreeBSD</a></li>
<li><a href="#spike-x-on-windows">2.3. Spike.x on Windows</a></li>
<li><a href="#simple-monitoring-example">2.4. Simple monitoring example</a></li>
</ul>
</li>
<li><a href="#modules">3. Modules</a>
<ul class="sectlevel2">
<li><a href="#module-core">3.1. Core</a></li>
<li><a href="#module-filter">3.2. Filter</a></li>
<li><a href="#module-metrics">3.3. Metrics</a></li>
<li><a href="#module-notifier">3.4. Notifier</a></li>
</ul>
</li>
<li><a href="#filters">4. Filters</a>
<ul class="sectlevel2">
<li><a href="#batch">4.1. Batch</a></li>
<li><a href="#command">4.2. Command</a></li>
<li><a href="#grok">4.3. Grok</a></li>
<li><a href="#limit">4.4. Limit</a></li>
<li><a href="#mutate">4.5. Mutate</a></li>
<li><a href="#tail">4.6. Tail</a></li>
<li><a href="#http">4.7. Http</a></li>
<li><a href="#elasticsearch">4.8. Elasticsearch</a></li>
<li><a href="#influxdb">4.9. Influxdb</a></li>
<li><a href="#nsq">4.10. NSQ</a></li>
<li><a href="#logback">4.11. Logback</a></li>
</ul>
</li>
<li><a href="#out-of-box-use-cases">5. Out-of-box use cases</a>
<ul class="sectlevel2">
<li><a href="#use-case-influxdb-grafana">5.1. Using InfluxDB and Grafana for monitoring</a></li>
<li><a href="#use-case-elasticsearch-kibana">5.2. Using Elasticsearch and Kibana for event analysis</a></li>
<li><a href="#monitoring-and-sending-of-notifications">5.3. Monitoring and sending of notifications</a></li>
</ul>
</li>
<li><a href="#troubleshooting">6. Troubleshooting</a></li>
<li><a href="#building-spike-x">7. Building Spike.x</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="sense-react-visualize">Sense. React. Visualize.</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Reactive event monitoring and data analysis built on top of <a href="http://vertx.io/vertx2">Vert.x</a>.</p>
</div>
<div class="paragraph">
<p>Spike.x provides components for resource monitoring, for data filtering and streaming,
for sending of notifications and for storing of metrics and events in various backends.</p>
</div>
<div class="paragraph">
<p>Spike.x can be used out-of-the-box for the following use cases:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><span class="icon"><i class="fa fa-bar-chart"></i></span> Filtering, streaming and analysis of events</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Tail logs and send events to <a href="https://www.elastic.co">Elasticsearch</a> or <a href="https://influxdata.com">InfluxDB</a></p>
</li>
<li>
<p>Collect JVM, CPU, network, filesystem and memory metrics</p>
</li>
<li>
<p>Collect database metrics using custom SQL</p>
</li>
<li>
<p>Query, analyze and present the data with <a href="https://www.elastic.co/products/kibana">Kibana</a> or <a href="http://grafana.org">Grafana</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><span class="icon"><i class="fa fa-bell"></i></span> Event monitoring and sending of notifications</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Monitor key data parameters</p>
</li>
<li>
<p>Trigger events based on custom rules</p>
</li>
<li>
<p>Log and send notifications to interested parties</p>
</li>
<li>
<p>Rule based sending of alarms</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Spike.x 0.9.0 is still in its infancy. It will take some time before it can be
considered production ready.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
We are planning to migrate to <a href="http://vertx.io">Vert.x 3</a> as soon as possible.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spike.x is built on top of the excellent <a href="http://vertx.io/vertx2">Vert.x platform</a>. Vert.x
is one of the many modern actor-like application platforms for the JVM.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">What is Vert.x?</div>
<div class="quoteblock">
<blockquote>
Vert.x is a polyglot, non-blocking, event-driven application platform that runs on the JVM.
</blockquote>
<div class="attribution">
&#8212; http://vertx.io/vertx2/manual.html#what-is-vertx
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You do not have to worry about thread synchronization when building applications
on top of Vert.x. You communicate using messages and you compose your code
into one or more modules. The verticle is the main actor in Vert.x. These and many
other concepts are explained in the <a href="http://vertx.io/vertx2/manual.html">Vert.x documentation</a>.</p>
</div>
<div class="paragraph">
<p>Spike.x brings a few concepts of its own to the table. We introduce the following
concepts: activator, filter and command.</p>
</div>
<div class="paragraph">
<p>An activator is simply a verticle that is responsible for deploying and undeploying
verticles within a module. The activator is the main verticle of a module.</p>
</div>
<div class="paragraph">
<p>A filter is a verticle that receives input, sends output or does both. Spike.x
comes with many filters that can be chained together in various ways. Here&#8217;s a list
of some of the built-in filters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Tail - reads lines from a log</p>
</li>
<li>
<p>Mutate - modifies an event</p>
</li>
<li>
<p>Limit - performs event limiting</p>
</li>
<li>
<p>Grok - matches regexps against an event field</p>
</li>
<li>
<p>HttpServer - receives events via HTTP (supports collectd wtite-http plugin and Nagios NRDP)</p>
</li>
<li>
<p>Batch - creates a batch of events before publishing</p>
</li>
<li>
<p>NSQ - publishes or subscribes events to/from NSQ</p>
</li>
<li>
<p>InfluxDB - stores events in InfluxDB 0.10.x or later</p>
</li>
<li>
<p>Elasticsearh - stores events in Elasticsearch</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Commands are used to control the behaviour of verticles. We send commands to
activators in order to deploy and undeploy filters. These commands are an internal
detail of Spike.x.</p>
</div>
<div class="paragraph">
<p>Spike.x has a Main class that is responsible for bootstrapping and starting
the Vert.x platform. It also takes care of daemonizing Spike.x if needed on
platforms that support this. Please see the spikex startup script for details.</p>
</div>
<div class="paragraph">
<p>When you start Spike.x it tries to load any required modules from a local deploy directory.</p>
</div>
<div class="paragraph">
<p>Spike.x depends on many well-established open source libraries. The following is a list
of some of the core dependencies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>SLF4J - Simple Logging Facade for Java</p>
</li>
<li>
<p>Logback - SLF4J implementation</p>
</li>
<li>
<p>Guava - Google&#8217;s core libraries</p>
</li>
<li>
<p>Joda-Time - Java date and time API (also part of Java 8)</p>
</li>
<li>
<p>Bouncy Castle Crypto APIs for Java</p>
</li>
<li>
<p>Hazelcast - Open Source In-Memory Data Grid (part of Vert.x)</p>
</li>
<li>
<p>LZ4 Java - LZ4 compression and xxhash hashing for Java</p>
</li>
<li>
<p>SnakeYAML - YAML parser and emitter for Java</p>
</li>
<li>
<p>GS Collections - A supplement or replacement for the Java Collections Framework</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="supported-platforms">1.1. Supported platforms</h3>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Spike.x can be installed on almost any platform that supports JDK 1.8 or newer to run. Please note that some of the filters only work on a specific platform.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following platforms are currently supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Windows 64-bit (Windows 7, Windows 2008 Server, etc.)</p>
</li>
<li>
<p>Linux 64-bit (Ubuntu, CentOs, RedHat, etc.)</p>
</li>
<li>
<p>Apple OS X 64-bit (Yosemite or newer)</p>
</li>
<li>
<p>FreeBSD 64-bit (FreeBSD 10 and newer)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="quick-start">1.2. Quick start</h3>
<div class="paragraph">
<p>You can grab the latest Spike.x installation package from <a href="https://bintray.com/spikex/generic/installer/view">Bintray</a>.</p>
</div>
<div class="paragraph">
<p>Simply launch the installer and follow the instructions.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The installer requires Java to function and Spike.x requires JDK 1.8 or newer.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="directories-and-files">1.3. Directories and files</h3>
<div class="paragraph">
<p>Spike.x is installed by default in <code>/var/lib/spikex</code> or in <code>C:\Program Files\Spike.x</code> on Windows.</p>
</div>
<div class="paragraph">
<p>The main configuration file is called <code>spikex.yaml</code> and it can be found in the <code>conf</code> directory.
You rarely need to modify this <a href="http://yaml.org">YAML</a> file. It lists the modules that you want to
load from the <code>deploy</code> directory.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Be careful not to save broken configuration files since Spike.x reloads saved configuration files automatically.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Filters are configured using one or more filter configuration files.
These <a href="http://yaml.org">YAML</a> files must start with the <code>filters</code> prefix and they are also stored in the <code>conf</code> directory.</p>
</div>
<div class="paragraph">
<p>Persistent data files are stored in the <code>data</code> directory. Whereas temporary data files,
that can be removed after Spike.x has been stopped, are storde in the <code>tmp</code> directory.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Spike.x directories within the home directory</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Directory</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Executables and service files</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">conf</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configuration and example files</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">data</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Persistent data files</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deploy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deployable modules</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">docs</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Javadocs and user guide</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lib</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Libraries required by Spike.x</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">log</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Log files</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tmp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Temprary data files</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="wiki-and-issues">1.4. Wiki and issues</h3>
<div class="paragraph">
<p>We maintain a small <a href="https://github.com/clidev/spike.x/wiki">Wiki</a> that you might find useful.
The latest issues can be found in <a href="https://github.com/clidev/spike.x/issues">GitHub</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="license">1.5. License</h3>
<div class="paragraph">
<p>Spike.x is provided under the terms of the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.</p>
</div>
<div class="paragraph">
<p>We carefully try to select and include only <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>
compliant software with Spike.x.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installation">2. Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spike.x runs on the <a href="https://en.wikipedia.org/wiki/Java_virtual_machine">Java VM</a>. It requires an adequate amount of memory and CPU resources to run.
In a typical small scale scenario you would install Spike.x on a dedicated host that is not running a mission critical system.
Spike.x would receive data from light-weight agents like <a href="https://collectd.org">collectd</a> and <a href="https://www.nsclient.org">NSClient++</a>.
It would then "sanitize" the data and finally send it off to a backend.</p>
</div>
<div class="paragraph">
<p>The minimum system requirements usually depend on the amount of data being processed.
Typically one CPU and 1 GB of memory should be adequate for most scenarios. The default installation uses the following JVM heap memory settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>-Xms64m</p>
</li>
<li>
<p>-Xmx256m</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We would advise you to start with the defaults settings and monitor the resource usage of Spike.x using the <a href="#module-metrics">Metrics</a> module.</p>
</div>
<div class="paragraph">
<p>The latest version of Spike.x is found at <a href="https://bintray.com/spikex/generic/installer/view">Bintray</a>. The <code>EXE</code> installer is for Windows platforms, whereas the <code>JAR</code> installer is for all other platforms.
Please note that Spike.x requires JDK 1.8 or newer. We test Spike.x on the <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Oracle JDK</a> and the <a href="http://openjdk.java.net">OpenJDK</a>. See the platform instructions below for installation details.</p>
</div>
<div class="sect2">
<h3 id="deployment-models">2.1. Deployment models</h3>
<div class="paragraph">
<p>We present InfluxDB and Grafana for storage and visualization in the deployment diagrams below but you could also use
<a href="#use-case-elasticsearch-kibana">Elasticsearch and Kibana</a>.</p>
</div>
<div class="paragraph">
<div class="title">Simple deployment diagram</div>
<p><span class="image"><img src="img/spikex-deployment-simple.png" alt="spikex-deployment-simple"></span></p>
</div>
<div class="paragraph">
<p>This deployment could be used if you are testing some software and want to do a minimal installation.
Nothing prevents you from installing the whole stack in one host if there&#8217;s enough resources.</p>
</div>
<div class="paragraph">
<div class="title">Small-scale deployment diagram</div>
<p><span class="image"><img src="img/spikex-deployment-small-scale.png" alt="spikex-deployment-small-scale"></span></p>
</div>
<div class="paragraph">
<p>This deployment could be used for a production site where you want to keep the monitored data locally on private servers
and you are not too concerned with scaling out the system.</p>
</div>
<div class="paragraph">
<div class="title">Cloud-based deployment diagram</div>
<p><span class="image"><img src="img/spikex-deployment-cloud-based.png" alt="spikex-deployment-cloud-based"></span></p>
</div>
<div class="paragraph">
<p>This deployment is ideal when you have multiple sites to monitor and you want to centralize the storage and visualization.
At the time of writing there is at least one <a href="https://customers.influxdb.com">hosted InfluxDB cloud service</a> that is supported by Spike.x.
Any service that exposes the InfluxDB HTTP API should work with Spike.x. The setup for this deployment is explained in <a href="#use-case-influxdb-grafana">the monitoring use case</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="spike-x-on-linux-os-x-and-freebsd">2.2. Spike.x on Linux, OS X and FreeBSD</h3>
<div class="paragraph">
<p>Download the latest Spike.x <code>JAR</code> installer from <a href="https://bintray.com/spikex/generic/installer/view">Bintray</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">wget https://bintray.com/artifact/download/spikex/generic/spikex-0.9.0-installer.jar</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">curl -O https://bintray.com/artifact/download/spikex/generic/spikex-0.9.0-installer.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>Run the installer and follow the instructions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">sudo java -jar spikex-0.9.0-installer.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>Test that you are able to start Spike.x in the terminal. Spike.x should output that it has deployed all the standard modules successfully.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">cd /var/lib/spikex
su -c 'bin/spikex' spikex</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="linux">2.2.1. Linux</h4>
<div class="paragraph">
<p>Copy the appropriate service script to <code>/etc/init.d</code> or <code>/etc/systemd/system</code> depending on your Linux distribution.
Please refer to the documentation of your distribution.</p>
</div>
<div class="paragraph">
<p>Start the Spike.x service and verify from the Spike.x log that the service started up without problems.</p>
</div>
<div class="listingblock">
<div class="title">CentOS 7 example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">sudo cp bin/spikex.service /etc/systemd/system
sudo systemctl daemon-reload
sudo systemctl enable spikex
sudo systemctl start spikex
sudo less /var/lib/spikex/log/spikex.log</code></pre>
</div>
</div>
<div class="paragraph">
<p>Stop the Spike.x service and create your filter configuration in <code>/var/lib/spikex/conf</code>.
You can simply copy an example configuration from <code>/var/lib/spikex/conf/examples</code> and edit it to suit your needs.</p>
</div>
<div class="paragraph">
<p>Please see the <a href="#simple-monitoring-example">Simple monitoring example</a> to get started. Configuration details can be found in the <a href="#filters">filters section</a>.</p>
</div>
<div class="paragraph">
<p>Remember to start the Spike.x service again once you have configured your filters and chains.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="spike-x-on-windows">2.3. Spike.x on Windows</h3>
<div class="paragraph">
<p>Download the latest Spike.x <code>EXE</code> installer from <a href="https://bintray.com/spikex/generic/installer/view">Bintray</a>.</p>
</div>
<div class="paragraph">
<p>Launch the installer and follow the instructions.</p>
</div>
<div class="paragraph">
<div class="title">Welcome screen</div>
<p><span class="image"><img src="img/spikex-win-install-welcome.png" alt="spikex-win-install-welcome"></span></p>
</div>
<div class="paragraph">
<div class="title">License agreement</div>
<p><span class="image"><img src="img/spikex-win-install-license.png" alt="spikex-win-install-license"></span></p>
</div>
<div class="paragraph">
<div class="title">Target path</div>
<p><span class="image"><img src="img/spikex-win-install-target-path.png" alt="spikex-win-install-target-path"></span></p>
</div>
<div class="paragraph">
<div class="title">Installation packages</div>
<p><span class="image"><img src="img/spikex-win-install-packages.png" alt="spikex-win-install-packages"></span></p>
</div>
<div class="paragraph">
<div class="title">Summary</div>
<p><span class="image"><img src="img/spikex-win-install-summary.png" alt="spikex-win-install-summary"></span></p>
</div>
<div class="paragraph">
<div class="title">Installation progress</div>
<p><span class="image"><img src="img/spikex-win-install-progress.png" alt="spikex-win-install-progress"></span></p>
</div>
<div class="paragraph">
<div class="title">Setup shortcuts</div>
<p><span class="image"><img src="img/spikex-win-install-shortcuts.png" alt="spikex-win-install-shortcuts"></span></p>
</div>
<div class="paragraph">
<div class="title">Installation finished</div>
<p><span class="image"><img src="img/spikex-win-install-finished.png" alt="spikex-win-install-finished"></span></p>
</div>
<div class="paragraph">
<p>Verify that the Spike.x was installed successfully as a Windows service.</p>
</div>
<div class="paragraph">
<div class="title">Spike.x service</div>
<p><span class="image"><img src="img/spikex-win-service.png" alt="spikex-win-service"></span></p>
</div>
<div class="paragraph">
<p>Stop the Spike.x service and create your filter configuration in <code>C:\Program Files\Spike.x\conf</code>.
You can simply copy an example configuration from <code>C:\Program Files\Spike.x\conf\examples</code> and edit it to suit your needs.</p>
</div>
<div class="paragraph">
<p>Please see the <a href="#simple-monitoring-example">Simple monitoring example</a> to get started. Configuration details can be found in the <a href="#filters">filters section</a>.</p>
</div>
<div class="paragraph">
<p>Remember to start the Spike.x service again once you have configured your filters and chains.</p>
</div>
</div>
<div class="sect2">
<h3 id="simple-monitoring-example">2.4. Simple monitoring example</h3>
<div class="paragraph">
<p>We start by defining an input filter that sends its data to the events log file. It also sends its output to an address called <code>metrics.spikex</code>.</p>
</div>
<div class="paragraph">
<p>Use your favorite text editor and create a file called <code>filters-metrics-oshi.yaml</code> in the <code>conf</code> directory.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
the entire <code>filters-metrics-oshi.yaml</code> file can be found in the <code>examples</code> directory.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">filters-metrics-oshi.yaml</div>
<div class="content">
<pre class="CodeRay highlight"><code>modules: [
    {
      module: 'io.spikex~spikex-filter',
      filters: [
            { alias: 'Metrics', verticle: 'io.spikex.filter.input.Metrics' },
            { alias: 'Log.out', verticle: 'io.spikex.filter.output.Logback' }
        ]
    }
]

chains: [
    {
        chain: 'system-metrics-load',
        filters: [
            {
                filter: 'Metrics',
                config: {
                    update-interval: '60s',
                    metric-selector: 'system.load',
                    add-tags: [ 'metric', 'spikex-metric-jvm', 'oshi' ]
                }
            },
            { '%OutputAddress': 'metrics.spikex' }
        ]
    },
    {
        chain: 'system-metrics-cpu',
        filters: [
            {
                filter: 'Metrics',
                config: {
                    update-interval: 15s,
                    metric-selector: 'system.cpu',
                    add-tags: [ 'metric', 'spikex-metric-jvm', 'oshi' ]
                }
            },
            { '%OutputAddress': 'metrics.spikex' }
        ]
    },
    {
        chain: 'system-metrics-memory',
        filters: [
            {
                filter: 'Metrics',
                config: {
                    update-interval: 15s,
                    metric-selector: 'system.memory',
                    add-tags: [ 'metric', 'spikex-metric-jvm', 'oshi' ]
                }
            },
            { '%OutputAddress': 'metrics.spikex' }
        ]
    },
    {
        chain: 'system-metrics-swap',
        filters: [
            {
                filter: 'Metrics',
                config: {
                    update-interval: 60s,
                    metric-selector: 'system.swap',
                    add-tags: [ 'metric', 'spikex-metric-jvm', 'oshi' ]
                }
            },
            { '%OutputAddress': 'metrics.spikex' }
        ]
    },
    {
        chain: 'system-metrics-filesystem',
        filters: [
            {
                filter: 'Metrics',
                config: {
                    update-interval: 60s,
                    metric-selector: 'filesystem',
                    add-tags: [ 'metric', 'spikex-metric-jvm', 'oshi' ]
                }
            },
            { '%OutputAddress': 'metrics.spikex' }
        ]
    },
    {
        chain: 'jvm-metrics-spikex',
        filters: [
            {
                filter: 'Metrics',
                config: {
                    update-interval: 15s,
                    metric-selector: 'jvm',
                    dsname-prefix: 'spikex',
                    add-tags: [ 'metric', 'spikex-metric-jvm', 'oshi' ]
                }
            },
            { '%OutputAddress': 'metrics.spikex' }
        ]
    },
    {
        chain: 'output-log',
        filters: [
            { '%InputAddress': 'metrics.spikex' },
            { filter: 'Log.out', config: { mdc-value: '%{@source}' } }
        ]
    }
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Start Spike.x from a terminal or the command prompt and verify that no exceptions are thrown.</p>
</div>
<div class="listingblock">
<div class="title">Linux or OS X terminal</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">cd /var/lib/spikex
su -c &quot;./bin/spikex&quot; spikex</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Windows command prompt as Administrator (assumes that Spike.x was installed on C:)</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">cd \Program Files\Spike.x\spikex
bin\spikex.bat</code></pre>
</div>
</div>
<div class="paragraph">
<p>Wait until you see from the output that Spike.x has successfully deployed the <code>io.spikex.filter.input.Metrics</code>
and <code>io.spikex.filter.output.Logback</code> verticles.</p>
</div>
<div class="paragraph">
<p>You can then let Spike.x run for a while and finally stop it using <code>Ctrl+d</code> or <code>Ctrl+c</code> on Windows.
Inspect the <code>events.log</code> file that&#8217;s stored in the <code>log</code> directory. It should contain lines like these:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>2015-12-06 12:37:50,384 Metrics {"@id":"65f2ab00-9c05-11e5-a3de-080027fe9e8b","@source":"Metrics","@timestamp":1449398270384,"@timezone":"UTC","@type":"metric","@chain":"system-metrics-memory","@priority":"normal","@host":"win7","@dsname":"system.memory","@dstype":"GAUGE","@dsprecision":"s","@subgroup":"used_perc","@instance":"-","@interval":15000,"@value":26.43424368265135,"@tags":["metric","spikex-metric-jvm","oshi"]}
2015-12-06 12:37:50,384 Metrics {"@id":"65f2ab01-9c05-11e5-a3de-080027fe9e8b","@source":"Metrics","@timestamp":1449398270384,"@timezone":"UTC","@type":"metric","@chain":"system-metrics-cpu","@priority":"normal","@host":"win7","@dsname":"system.cpu","@dstype":"GAUGE","@dsprecision":"s","@subgroup":"load_avg","@instance":"cpu1","@interval":15000,"@value":0.010510910058541777,"@tags":["metric","spikex-metric-jvm","oshi"]}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Please see the <a href="#troubleshooting">Troubleshooting</a> section if you encounter problems. Usually the <code>spikex.log</code> contains the cause of the problem.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="modules">3. Modules</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spike.x provides the following standard modules that are always available.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 60%;">
<caption class="title">Table 2. Standard modules</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Module</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Core (mod-spikex-core)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Base classes and services</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filtering (mod-spikex-filter)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data input, filtering and output</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metrics (mod-spikex-metrics)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spike.x JVM and system resource information (CPU, memory, disk, JVM heap, etc.)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Notifier (mod-spikex-notifier)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Storing and sending of notifications</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="module-core">3.1. Core</h3>
<div class="paragraph">
<p>home-path
base-path
data-path
run-path
var-path?
log-path
conf-path</p>
</div>
<div class="sect3">
<h4 id="configuration">3.1.1. Configuration</h4>

</div>
</div>
<div class="sect2">
<h3 id="module-filter">3.2. Filter</h3>
<div class="sect3">
<h4 id="configuration-2">3.2.1. Configuration</h4>
<div class="paragraph">
<p>ChainA: filter&#8594;filter&#8594;filter</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="module-metrics">3.3. Metrics</h3>
<div class="sect3">
<h4 id="configuration-3">3.3.1. Configuration</h4>

</div>
</div>
<div class="sect2">
<h3 id="module-notifier">3.4. Notifier</h3>
<div class="sect3">
<h4 id="configuration-4">3.4.1. Configuration</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="filters">4. Filters</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="batch">4.1. Batch</h3>
<div class="sect3">
<h4 id="configuration-5">4.1.1. Configuration</h4>

</div>
</div>
<div class="sect2">
<h3 id="command">4.2. Command</h3>
<div class="sect3">
<h4 id="configuration-6">4.2.1. Configuration</h4>

</div>
</div>
<div class="sect2">
<h3 id="grok">4.3. Grok</h3>
<div class="sect3">
<h4 id="configuration-7">4.3.1. Configuration</h4>

</div>
</div>
<div class="sect2">
<h3 id="limit">4.4. Limit</h3>
<div class="sect3">
<h4 id="configuration-8">4.4.1. Configuration</h4>

</div>
</div>
<div class="sect2">
<h3 id="mutate">4.5. Mutate</h3>
<div class="sect3">
<h4 id="configuration-9">4.5.1. Configuration</h4>

</div>
</div>
<div class="sect2">
<h3 id="tail">4.6. Tail</h3>
<div class="sect3">
<h4 id="configuration-10">4.6.1. Configuration</h4>

</div>
</div>
<div class="sect2">
<h3 id="http">4.7. Http</h3>
<div class="sect3">
<h4 id="configuration-11">4.7.1. Configuration</h4>

</div>
</div>
<div class="sect2">
<h3 id="elasticsearch">4.8. Elasticsearch</h3>
<div class="sect3">
<h4 id="configuration-12">4.8.1. Configuration</h4>

</div>
</div>
<div class="sect2">
<h3 id="influxdb">4.9. Influxdb</h3>
<div class="sect3">
<h4 id="configuration-13">4.9.1. Configuration</h4>

</div>
</div>
<div class="sect2">
<h3 id="nsq">4.10. NSQ</h3>
<div class="sect3">
<h4 id="configuration-14">4.10.1. Configuration</h4>

</div>
</div>
<div class="sect2">
<h3 id="logback">4.11. Logback</h3>
<div class="sect3">
<h4 id="configuration-15">4.11.1. Configuration</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="out-of-box-use-cases">5. Out-of-box use cases</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="use-case-influxdb-grafana">5.1. Using InfluxDB and Grafana for monitoring</h3>
<div class="paragraph">
<p>This use case describes how to monitor system metrics of a Windows host.</p>
</div>
<div class="paragraph">
<p>Start by setting up a <a href="https://customers.influxdb.com">hosted InfluxDB service</a> provided by <a href="https://influxdata.com">influxdata</a>. You can use the <code>Start Trial Now</code> option to test this use case.</p>
</div>
<div class="paragraph">
<p>Once you have access to the <a href="https://customers.influxdb.com">hosted service</a> you can <a href="#spike-x-on-windows">install Spike.x on a Windows host</a>.</p>
</div>
<div class="paragraph">
<p>Start by copying the <code>filters-metrics-oshi.yaml</code> and <code>filters-metrics-influxdb.yaml</code> example configuration files to the <code>conf</code> directory.</p>
</div>
<div class="paragraph">
<p>Set the InfluxDB host, admin account and enable SSL in the <code>filters-metrics-influxdb.yaml</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">...
nodes: [ 'https://influxdb:e08b1f004b35ddae@pepsifree-gigawatt-16.c.influxdb.com:8086' ],
admin-user: 'influxdb',
admin-password: 'e08b1f004b35ddae',
ssl-enabled: true,
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>No modifications are needed to the <code>filters-metrics-oshi.yaml</code> configuration file.</p>
</div>
<div class="paragraph">
<p>Test that the setup works by starting Spike.x from the command line using Administrator permissions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">cd \Program Files\Spike.x\spikex
bin\spikex.bat</code></pre>
</div>
</div>
<div class="paragraph">
<p>Please see the <a href="#troubleshooting">Troubleshooting</a> section if you encounter problems.
Otherwise login to the hosted Grafana service and setup the Spike.x datasource by simply entering <code>spikex</code> in the <code>Database</code> field and saving the value.</p>
</div>
<div class="paragraph">
<div class="title">Grafana Spike.x datasource</div>
<p><span class="image"><img src="img/influxdb-hosted-grafana-datasource.png" alt="influxdb-hosted-grafana-datasource"></span></p>
</div>
<div class="sect3">
<h4 id="linux-freebsd-or-os-x">5.1.1. Linux, FreeBSD or OS X</h4>
<div class="paragraph">
<p>Next you can install <a href="https://collectd.org">Collectd</a> and configure it to send its data to Spike.x.
You can choose between the <a href="https://collectd.org/wiki/index.php/Plugin:Write_HTTP">Write_HTTP</a> or <a href="https://collectd.org/wiki/index.php/Plugin:Network">Network</a> plugin.</p>
</div>
</div>
<div class="sect3">
<h4 id="windows">5.1.2. Windows</h4>
<div class="paragraph">
<p>Next you can download and install <a href="https://www.nsclient.org">NSClient&#43;&#43;</a>.
Replace the default <code>nsclient.ini</code> with the one found in the <code>examples</code> directory of Spike.x.
Restart the <code>NSClient++</code> windows service and verify from the <code>events.log</code> file that you are receiving measurements.</p>
</div>
<div class="paragraph">
<p>That&#8217;s it. Now you can continue by creating beautiful dashboards in Grafana.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="use-case-elasticsearch-kibana">5.2. Using Elasticsearch and Kibana for event analysis</h3>
<div class="paragraph">
<p>This use case describes how to analyze log events using <a href="https://www.elastic.co/products/elasticsearch">Elastichsearch</a> and <a href="https://www.elastic.co/products/kibana">Kibana</a>.
This can be seen as a form of log shipping where we pre-filter the events to only contain data of interest.</p>
</div>
<div class="paragraph">
<p>Start by setting up a <a href="https://www.elastic.co/found">hosted Elasticsearch service</a> provided by <a href="https://www.elastic.co">Elastic</a>. You can use the <code>Free Trial</code> option to test this use case.</p>
</div>
<div class="paragraph">
<p>Once you have access to the <a href="https://www.elastic.co/found">hosted service</a> you can <a href="#installation">install Spike.x</a> on a host that contains the log file to analyze.</p>
</div>
<div class="paragraph">
<p>Next we&#8217;ll configure Spike.x to send some data to Elasticsearch to verify that the hosted service is working.</p>
</div>
</div>
<div class="sect2">
<h3 id="monitoring-and-sending-of-notifications">5.3. Monitoring and sending of notifications</h3>
<div class="paragraph">
<p>CUPS queue monitoring in Linux
Process/Service monitoring in Windows</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="troubleshooting">6. Troubleshooting</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="building-spike-x">7. Building Spike.x</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Download or clone the sources from <a href="https://github.com/clidev/spike.x.git">GitHub</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell">git clone https://github.com/clidev/spike.x.git
cd spike.x</code></pre>
</div>
</div>
<div class="paragraph">
<p>List the available gradle projects with <code>gradlew projects</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell"> ./gradlew projects</code></pre>
</div>
</div>
<div class="paragraph">
<p>List the available gradle tasks with <code>gradlew tasks</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell"> ./gradlew tasks</code></pre>
</div>
</div>
<div class="paragraph">
<p>Compile, test and build Spike.x with <code>gradlew clean build</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell"> ./gradlew clean build</code></pre>
</div>
</div>
<div class="paragraph">
<p>Create the installation packages with <code>gradlew izpack launch4j</code>. The <code>launch4j</code>
task works in Linux, Windows and OS X.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell"> ./gradlew izpack launch4j</code></pre>
</div>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Spike.x 0.9.0 and Gradle 1.10 does not support Maven profiles. When
resolving dependencies you get the following kind of errors:
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>FAILURE: Build failed with an exception.

* What went wrong:
Could not resolve all dependencies for configuration ':spikex-core:provided'.
&gt; Could not resolve ch.qos.logback:logback-classic:1.1.1.
  Required by:
      io.spikex:spikex-core:0.9.0
   &gt; Could not parse POM http://jcenter.bintray.com/ch/qos/logback/logback-classic/1.1.1/logback-classic-1.1.1.pom
      &gt; Resetting to invalid mark
   &gt; Could not parse POM http://repo1.maven.org/maven2/ch/qos/logback/logback-classic/1.1.1/logback-classic-1.1.1.pom
      &gt; Resetting to invalid mark
   &gt; Could not parse POM http://repo1.maven.org/maven2/ch/qos/logback/logback-classic/1.1.1/logback-classic-1.1.1.pom
      &gt; Resetting to invalid mark
&gt; Could not resolve org.kohsuke:akuma:1.9.
  Required by:
      io.spikex:spikex-core:0.9.0
   &gt; Could not parse POM http://jcenter.bintray.com/org/kohsuke/akuma/1.9/akuma-1.9.pom
      &gt; Content is not allowed in prolog.
   &gt; Could not parse POM http://repo1.maven.org/maven2/org/kohsuke/akuma/1.9/akuma-1.9.pom
      &gt; Content is not allowed in prolog.
   &gt; Could not parse POM http://repo1.maven.org/maven2/org/kohsuke/akuma/1.9/akuma-1.9.pom
      &gt; Content is not allowed in prolog.</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>Spike.x - Sense. React. Visualize.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.0<br>
Last updated 2016-02-27 21:08:03 EET
</div>
</div>
</body>
</html>